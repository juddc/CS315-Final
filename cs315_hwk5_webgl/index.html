<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="css/cs315.css" />

<!-- load external dependencies -->
<script src="libs/jquery-1.10.2.min.js"></script>
<script src="libs/gl-matrix-min.js"></script>
<script src="libs/webgl-obj-loader.js"></script>

<!-- load helper scripts that don't directly depend on GameEngine -->
<script src="webGLJS/WebGL.js"></script>
<script src="webGLJS/MathHelpers.js"></script>
<script src="gameJS/InputHandler.js"></script>
<script src="gameJS/MessageHandler.js"></script>

<!-- load external files (precompiled into one javascript file) -->
<script src="gameJS/GameData.js"></script>

<!-- load internal dependencies -->
<script src="gameJS/CircleCollider.js"></script>
<script src="gameJS/RectangleCollider.js"></script>
<script src="gameJS/Light.js"></script>
<script src="gameJS/GameObject.js"></script>
<script src="gameJS/Ball.js"></script>
<script src="gameJS/Camera.js"></script>

<!-- load the game engine -->
<script src="gameJS/GameEngine.js"></script>

<!-- finally, load the game -->
<script src="gameJS/Breakout.js"></script>

<script>

$(document).ready(function() {
	// check if GameData has been parsed and loaded correctly
	if (typeof DATA != 'undefined') {
		// get a reference to the canvas DOM node
		var canvas = $('#glcanvas')[0];
		canvas.width = document.body.clientWidth;
		//
		// start the game
		//
		InputSetup();             // 1. set up input handling
		WebGLSetup(canvas);       // 2. set up WebGL
		GameEngineSetup(canvas);  // 3. set up GameEngine
		BreakoutSetup();          // 4. set up the actual game
	}
	else {
		addErrorMessage("Could not load GameData.js. Did you run data_compiler.py?");
		$("#game").hide();
	}
});

</script>
</head>
<body>

<!-- error messages can go here. hide by default -->
<div id="error" style="display:none"></div>

<div align="center" id="game">
	<canvas id="glcanvas" width="800" height="600">
		If you see this, your browser doesn't support HTML5 canvas elements!
	</canvas>
	<p id="credits">by Paul Makl and Judd Cohen</p>
	<button type="button" onclick="reset()">Reset Game</button>

	<script>
		function reset(){
			engine.gameObjects = [];
			engine.updateObjects = [];
			BreakoutSetup();
		}
	</script>
</div>

</body>
</html>
